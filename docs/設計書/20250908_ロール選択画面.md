# ロール選択画面（React Navigation モーダル）
- 名前: RoleSelectPage

## 概要
- メールアドレス、パスワードでログイン後にモーダル表示する画面
- React Navigationの`presentation: 'modal'`を使用
- 条件に応じて以下の2パターンを表示：
  1. 家族情報がある場合：親・子ログインボタン
  2. 家族情報がない場合：新規家族作成・家族参加ボタン

## イベント_初期表示時
- loginRouter.loginを、実行
  - jwtトークン.useridから紐づく親と子、家族を取得する
  - 紐づく情報がない項目はundefinedとする
  - jwtトークンはSessionStoreから取得する

## 画面項目

### 家族名ラベル（家族情報がある場合）
- 取得.家族≠undefinedの場合、表示
- 取得.家族.nameを表示
- 画面上部に配置

### 親ユーザでログインボタン（家族情報がある場合）
- 取得.家族≠undefinedの場合、表示
- 白背景のボタン、影付きスタイル
#### 押下時
- 取得.親==undefinedの場合
  - ダイアログ表示「親ユーザが存在しません。親を作成しますか？」
    - 「はい」→親ユーザ作成画面へ遷移
    - 「いいえ」→ダイアログを閉じる
- 上記以外
  - 親ホーム画面へ遷移

### 子ユーザでログインボタン（家族情報がある場合）
- 取得.家族≠undefinedの場合、表示
- 白背景のボタン、影付きスタイル
#### 押下時
- 取得.子==undefinedの場合
  - ダイアログ表示「子ユーザが存在しません。子を作成しますか？」
    - 「はい」→子ユーザ作成画面へ遷移
    - 「いいえ」→ダイアログを閉じる
- 上記以外
  - 子ホーム画面へ遷移

### 新規家族を作成ボタン（家族情報がない場合）
- 取得.家族==undefinedの場合、表示
- 白背景のボタン、影付きスタイル
#### 押下時
- 家族作成画面へ遷移する

### 家族に参加ボタン（家族情報がない場合）
- 取得.家族==undefinedの場合、表示
- 白背景のボタン、影付きスタイル
#### 押下時
- ロール選択ダイアログを表示: 「親と子どちらで参加しますか？」
  - 「親」→親ユーザ作成画面へ遷移
  - 「子」→家族コード入力画面へ遷移

## 画面レイアウト

### パターン1: 家族情報がある場合
```plaintext
|-------------------------------|
|           家族名              |
|                              |
| [親ユーザでログイン]          |
|                              |
| [子ユーザでログイン]          |
|                              |
|-------------------------------|
```

### パターン2: 家族情報がない場合
```plaintext
|-------------------------------|
|                              |
| [新規家族を作成]              |
|                              |
| [家族に参加]                  |
|                              |
|-------------------------------|
```

## 実装計画

### バックエンド (既存利用)
- [x] loginRouter
  - ファイルパス: `@backend/src/features/auth/router/loginRouter.ts`
  - 概要: 既存のloginエンドポイントを使用

### フロントエンド (Model)
- [x] roleSelectData
  - ファイルパス: `@frontend/src/features/auth/role-select-page/models/roleSelectData.ts`
  - 概要:
    - loginResponseから得られるデータモデル
    - 家族情報、親情報、子情報の保持

### フロントエンド (Store)
- [x] roleSelectPageStore
  - ファイルパス: `@frontend/src/features/auth/role-select-page/stores/roleSelectPageStore.ts`
  - 概要:
    - BasePageStoreを継承
    - ページの状態管理
    - loginResponse の管理
    - ローディング状態の管理
    - roleSelectData

### フロントエンド (Service)
- [x] fetchRoleSelectData
  - ファイルパス: `@frontend/src/features/auth/role-select-page/services/fetchRoleSelectData.ts`
  - 概要:
    - loginRouter.loginを呼び出してデータ取得
    - JWTトークンを使用した認証付きリクエスト
    - レスポンスをRoleSelectDataモデルに変換

### フロントエンド (Hook - 基本機能)
- [x] useRoleSelectDataInitializer
  - ファイルパス: `@frontend/src/features/auth/role-select-page/hooks/useRoleSelectDataInitializer.ts`
  - 概要:
    - loginRouter.loginを呼び出してデータ初期化
    - JWTトークンからユーザー情報取得
    - ページ初期表示時の処理

### フロントエンド (Hook - ハンドラー)
- [x] useFamilyCreateHandler
  - ファイルパス: `@frontend/src/features/auth/role-select-page/hooks/handlers/useFamilyCreateHandler.ts`
  - 概要:
    - 家族作成ボタン押下時の処理
    - 家族作成画面への遷移

- [x] useParentLoginHandler
  - ファイルパス: `@frontend/src/features/auth/role-select-page/hooks/handlers/useParentLoginHandler.ts`
  - 概要:
    - 親でログインボタン押下時の処理
    - 親ホーム画面への遷移

- [x] useParentCreateHandler
  - ファイルパス: `@frontend/src/features/auth/role-select-page/hooks/handlers/useParentCreateHandler.ts`
  - 概要:
    - 親ユーザ作成ボタン押下時の処理
    - 親ユーザ作成画面への遷移

- [x] useChildLoginHandler
  - ファイルパス: `@frontend/src/features/auth/role-select-page/hooks/handlers/useChildLoginHandler.ts`
  - 概要:
    - 子でログインボタン押下時の処理
    - 子ホーム画面への遷移

- [x] useChildCreateHandler
  - ファイルパス: `@frontend/src/features/auth/role-select-page/hooks/handlers/useChildCreateHandler.ts`
  - 概要:
    - 子ユーザ作成ボタン押下時の処理
    - 家族コード入力画面または子ユーザ作成画面への遷移

- [x] useFamilyJoinHandler
  - ファイルパス: `@frontend/src/features/auth/role-select-page/hooks/handlers/useFamilyJoinHandler.ts`
  - 概要:
    - 家族参加ボタン押下時の処理
    - ロール選択ダイアログを表示

### フロントエンド (Hook - 統合)
- [x] createRoleSelectPageHandlers
  - ファイルパス: `@frontend/src/features/auth/role-select-page/hooks/createRoleSelectPageHandlers.ts`
  - 概要:
    - 統合フック - 全ハンドラーをまとめて提供

### フロントエンド (Components)
- [x] FamilyNameLabel
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/FamilyNameLabel.tsx`
  - 概要:
    - 家族名表示用ラベル
    - 家族情報がある場合のみ表示

- [x] FamilyCreateButton
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/FamilyCreateButton.tsx`
  - 概要:
    - 新規家族作成ボタン
    - 家族情報がない場合のみ表示

- [x] FamilyJoinButton
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/FamilyJoinButton.tsx`
  - 概要:
    - 家族参加ボタン
    - 家族情報がない場合のみ表示

- [x] ParentLoginButton
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/ParentLoginButton.tsx`
  - 概要:
    - 親でログインボタン
    - 家族情報がある場合のみ表示

- [x] ParentCreateButton
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/ParentCreateButton.tsx`
  - 概要:
    - 親ユーザ作成ボタン
    - 家族情報があり親情報がない場合のみ表示

- [x] ChildLoginButton
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/ChildLoginButton.tsx`
  - 概要:
    - 子でログインボタン
    - 家族情報がある場合のみ表示

- [x] ChildCreateButton
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/ChildCreateButton.tsx`
  - 概要:
    - 子ユーザ作成ボタン
    - 子情報がない場合のみ表示

### フロントエンド (Page)
- [x] RoleSelectPage
  - ファイルパス: `@frontend/src/features/auth/role-select-page/RoleSelectPage.tsx`
  - 概要:
    - React Navigation モーダル対応
    - 条件分岐表示の実装
    - シンプルな画面構成

- [ ] RoleSelectPageのレイアウト修正
  - 画面レイアウトに沿って配置

### フロントエンド (Navigator)
- [x] AuthNavigator
  - ファイルパス: `@frontend/src/features/auth/AuthNavigator.tsx`
  - 概要:
    - presentation: 'modal' 設定
    - headerShown: false 設定
    - gestureEnabled: true 設定
