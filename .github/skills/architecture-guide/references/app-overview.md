# アプリケーション概要

## アプリ名
お小遣いクエストボード

## アプリの目的
親がクエストを登録し、子供がそのクエストを実行するとお小遣いが貰える仕組みをシステム化する。オンライン機能により、世界中の家族が自身のクエストを共有できる。

## ユーザタイプ

### 親ユーザ
- クエストの登録や編集が可能
- 家族情報の変更が可能
- オンラインの公開クエストの閲覧が可能
- 子供のクエスト達成報告を承認・却下できる

### 子供ユーザ
- 家族クエストの閲覧が可能
- クエストの受注が可能
- クエストの達成報告ができる

## 技術スタック

### フロントエンド
- **フレームワーク**: Next.js (App Router)
- **UIライブラリ**: MantineUI
- **状態管理**: TanStack Query (React Query)
- **フォーム**: React Hook Form
- **スタイリング**: Tailwind CSS

### バックエンド
- **フレームワーク**: Next.js API Routes
- **ORM**: Drizzle ORM
- **Database**: Supabase (PostgreSQL)
- **認証**: Supabase Auth

## 主要な機能

### クエスト管理
1. **家族クエスト**: 家族内で作成・管理されるクエスト
2. **公開クエスト**: オンラインで他の家族と共有されるクエスト
3. **クエスト受注**: 子供がクエストを選択して挑戦
4. **達成報告**: 子供がクエスト完了を報告し、親が承認

### お小遣い管理
1. **報酬計算**: クエスト達成時の報酬額の計算
2. **貯金機能**: お小遣いの貯金と引き出し
3. **罰金機能**: 違反行為に対する罰金の適用

### その他
1. **タイムライン**: クエストの履歴や活動記録
2. **通知機能**: クエスト関連の通知
3. **アイコン管理**: 家族やクエストのカスタムアイコン

## 重要な制約

### DB操作
- DB接続はSupabase Clientを使用する
- 複数テーブルの更新はSupabaseの`Database Functions`を使用する
- Drizzle ORMの低レベルクエリを使用すること（高レベルクエリは禁止）

### 開発分担
- 基本的にバックエンド側は人間が作成する
- フロントエンド部分をAIが担当する
- ただし、API設計（client.ts + route.ts）はセットで作成すること
